.container-fluid
  .row{style: 'margin-top:0'}
    .col-xs-1
    .col-xs-10{style: 'padding-right:0'}
      %p.headline-3= title
    .col-xs-1
  #scroller_container
    .row
      .col-xs-1.slick-arrow{ id: "leftarrow#{id_frag}", style: 'height:50px;top:0px;'}
        %svg{ viewbox: '0 0 16000 16000', style: 'position:absolute;top:20px;left:0;width:100%;height:100%;'}
          %path{ 'class' => 'a', fill:'#660248', d: 'M4037.7,8357.3l5891.8,5891.8c100.6,100.6,219.7,150.9,357.3,150.9s256.7-50.3,357.3-150.9 l1318.1-1318.1c100.6-100.6,150.9-219.7,150.9-357.3c0-137.6-50.3-256.7-150.9-357.3L7745.9,8000l4216.4-4216.4 c100.6-100.6,150.9-219.7,150.9-357.3c0-137.6-50.3-256.7-150.9-357.3l-1318.1-1318.1c-100.6-100.6-219.7-150.9-357.3-150.9 s-256.7,50.3-357.3,150.9L4037.7,7642.7c-100.6,100.6-150.9,219.7-150.9,357.3C3886.8,8137.6,3937.1,8256.7,4037.7,8357.3 L4037.7,8357.3z'}
      .col-xs-10
        .scroller{ id: "scroller#{id_frag}", style: 'width:100%'}
          /- maxcard = (surprise ? 2 : 3)
          - maxcard = (surprise ? 7 : 8)
          - if surprise
            .slide
              .carousel.slide#surprise_author_carousel
                .carousel-inner
                  .card.author-card.surprise.item.active#side1
                    %a{ role: :button, id: 'surprise_author_link'}
                      .corner
                        %img{ src: '/assets/corner.png', width: 80, height: 80}
                      .author-homepage-pic{style:'padding-top:3rem'}
                        %span.icon-bysurprise-author{style:'font-size:7.6rem;margin-bottom:1.4rem;'}
                        %p.headline-3= t(:surprise_author)
                      .author-homepage-name
                  .card.author-card.surprise.item#side2
                    = render partial: 'shared/surprise_author', locals: {author: @surprise_author}

          - authors[0..maxcard].each do |author|
            - break if author.nil? # devmode protection against fewer than 5 most-popular authors
            .slide{ style: 'margin-left: 5px; margin-right: 5px'}
              .card.author-card
                / %a{href: author_toc_path(author)}
                %a{ 'data-toggle' => :modal, 'data-target'=> "#author_popup_#{author.id}"}
                  .author-homepage-pic
                    %img{ src: author.profile_image.url(:thumb), height:'230px'}
                  .author-homepage-name
                    %p.vcentered= author.name
      .col-xs-1.slick-arrow{ id: "rightarrow#{id_frag}", style: 'height:50px;top:0px;'}
        %svg{ viewbox: '0 0 16000 16000', style: 'position:absolute;top:20px;left:0;width:100%;height:100%'}
          %path{ 'class' => 'a', fill:'#660248', d: 'M11962.3,8357.3l-5891.8,5891.8c-100.6,100.6-219.7,150.9-357.3,150.9s-256.7-50.3-357.3-150.9 L4037.7,12931c-100.6-100.6-150.9-219.7-150.9-357.3c0-137.6,50.3-256.7,150.9-357.3L8254.1,8000L4037.7,3783.6 c-100.6-100.6-150.9-219.7-150.9-357.3c0-137.6,50.3-256.7,150.9-357.3l1318.1-1318.1c100.6-100.6,219.7-150.9,357.3-150.9 s256.7,50.3,357.3,150.9l5891.8,5891.8c100.6,100.6,150.9,219.7,150.9,357.3C12113.2,8137.6,12062.9,8256.7,11962.3,8357.3 L11962.3,8357.3z'}
- authors[0..maxcard].each do |author|
  %div{class: "modal fade", role: 'dialog', id: "author_popup_#{author.id}"}
    .modal-dialog
      .card.author-top{direction: 'rtl'}
        %div
          %button.close.card-header-close{ type: 'button', style: 'margin-left:1.5rem;margin-top:1.9rem;', 'data-dismiss' => 'modal'}
            != '&times;'
        .creator-bookmark-back
          %img{src: '/assets/creator-bookmark-back2.png', width: 168, height: 6}
        .creator-bookmark-front
          %img{src: author.profile_image.url(:thumb), width: 162}
        .card-content.near-picture
          %p.headline-2{style: 'padding-top:0.4rem'}
            = link_to author.name, author_toc_path(author.id)
            != " (#{author.life_years})"
          %div{style: 'display: inline-block; margin-top:0.4rem'}
            .card-header-element
              %a{id: "heart_#{author.id}"}
                %i.fa.fa-heart-o{style: 'padding-top: 0.2rem'}
            .card-header-element
              %span{ class: "icon-#{author.rights_icon}", style:'margin-left:0.6rem;position:relative;top:2px;', 'data-toggle' => 'tooltip', title: author.public_domain ? t(:pd_explain) : t(:permission_explain)}
              = author.copyright_as_string
            - if author.blog_count > 0
              .card-header-element
                %a{ href: author.blog_category_url}
                  %span{ style: 'margin-left: 0.6rem;position:relative;top:3px;'}
                    %i.fa.fa-pencil-square-o
                  = t(:about_the_author_on_the_blog)
          - unless author.wikipedia_snippet.nil? or author.wikipedia_snippet.length < 10
            %div{style: 'margin-top: 0.6rem'}
              %p= author.wikipedia_snippet
            %div
              %p= link_to t(:rest_in_wikipedia), author.wikipedia_url
          .margintop2
            .headline-4{style: 'display: inline'}= t(:works_in_the_database)+': '
            = link_to "#{author.expressions.count} #{t(:works)}", author_toc_path(author.id)
          .margintop2
            .headline-4= t(:their_most_read_works, gender_letter: author.gender_letter)
            %ol
              - author.most_read(5).each do |m|
                - genre = m.expressions[0].genre
                - genrebit = genre.nil? ? '' : " (#{textify_genre(ignoregenre)})"
                %li= link_to m.title+genrebit, manifestation_read_path(m.id)

        %div{ style:'position:relative; bottom: 6.5rem;left:4.4rem;'}
          .btn
            %p.vcentered
              %a{ style:'color:white', href: author_toc_path(author.id)}
                = t(:to_the_author_page)
                - if author.gender == 'female'
                  = '×ª'
:javascript
  $(document).ready(function() {
    $('[data-toggle="tooltip"]').tooltip();
    $("#scroller#{id_frag}").slick({
      infinite: false,
      //slidesToShow: 3,
      placeholders: false,
      slidesToScroll: 1,
      arrows: true,
      rtl: true,
      outerEdgeLimit: true,
      nextArrow: "#leftarrow#{id_frag}",
      prevArrow: "#rightarrow#{id_frag}",
      variableWidth: true,
      // appendArrows: '#scroller_container',
    });
  });

  $('#surprise_author_carousel').carousel({interval: false, wrap: true});
  $('#surprise_author_link').click(function(){
    $('#surprise_author_carousel').carousel('next'); // switch to ready surprise
    $('#side1').load("#{url_for(controller: :authors, action: :get_random_author)}"); // and load next one
  });
